## å·¦è€³å¬é£ARTSç¬¬åäºŒå‘¨ï¼ˆ2020å¹´02æœˆ16æ—¥ï¼‰

Â 1.**Algorithm** ï¼ˆLCP 1. çŒœæ•°å­—ï¼‰å®ç°Â strStr()Â å‡½æ•°ã€‚

ç»™å®šä¸€ä¸ªÂ haystack å­—ç¬¦ä¸²å’Œä¸€ä¸ª needle å­—ç¬¦ä¸²ï¼Œåœ¨ haystack å­—ç¬¦ä¸²ä¸­æ‰¾å‡º needle å­—ç¬¦ä¸²å‡ºç°çš„ç¬¬ä¸€ä¸ªä½ç½® (ä»0å¼€å§‹)ã€‚å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™è¿”å›Â  -1ã€‚

ç¤ºä¾‹ 1:

è¾“å…¥: haystack = "hello", needle = "ll"
è¾“å‡º: 2
ç¤ºä¾‹ 2:

è¾“å…¥: haystack = "aaaaa", needle = "bba"
è¾“å‡º: -1
è¯´æ˜:

å½“Â needleÂ æ˜¯ç©ºå­—ç¬¦ä¸²æ—¶ï¼Œæˆ‘ä»¬åº”å½“è¿”å›ä»€ä¹ˆå€¼å‘¢ï¼Ÿè¿™æ˜¯ä¸€ä¸ªåœ¨é¢è¯•ä¸­å¾ˆå¥½çš„é—®é¢˜ã€‚

å¯¹äºæœ¬é¢˜è€Œè¨€ï¼Œå½“Â needleÂ æ˜¯ç©ºå­—ç¬¦ä¸²æ—¶æˆ‘ä»¬åº”å½“è¿”å› 0 ã€‚è¿™ä¸Cè¯­è¨€çš„Â strstr()Â ä»¥åŠ Javaçš„Â indexOf()Â å®šä¹‰ç›¸ç¬¦ã€‚

class Solution {
    public int strStr(String haystack, String needle) {
        if(needle.equals("")) {
            return 0;
        }
        if(haystack.equals("")) {
            return -1;
        }
        
        // æ„é€ KMPä¸­çš„dpçŸ©é˜µ
        int m = needle.length();
        // å„ä¸ªçŠ¶æ€(è¡Œ)é‡åˆ°ä¸‹ä¸€ä¸ªå­—ç¬¦(åˆ—)è·³è½¬åˆ°å“ªä¸ªçŠ¶æ€
        int[][] dp = new int[m][256]; 
        // å½±å­çŠ¶æ€
        int X = 0;  
        dp[0][needle.charAt(0)] = 1;
        for (int i = 1; i < m; i++) {
            for (int j = 0; j < 256; j++) {
                //å‡è®¾ä¸‹ä¸ªå­—ç¬¦ä¸åŒ¹é…ï¼Œæ­¤æ—¶è¦å›å»çœ‹å½±å­çŠ¶æ€ï¼Œä»è€Œå¾—çŸ¥è·³è½¬åˆ°å“ªä¸ªçŠ¶æ€
                dp[i][j] = dp[X][j];  
            }
            // åªæœ‰patä¸Šiçš„å­—ç¬¦åŒ¹é…ï¼Œè·³è½¬åˆ°ä¸‹ä¸ªçŠ¶æ€
            dp[i][needle.charAt(i)] = i + 1;  
            // æ›´æ–°å½±å­çŠ¶æ€
            X = dp[X][needle.charAt(i)];
        }
        
        // æ„é€ dpå®Œæˆåï¼Œå¼€å§‹search
        // åˆå§‹çŠ¶æ€ä¸º0
        int s = 0;
        for (int i = 0; i < haystack.length(); i++) {
            s = dp[s][haystack.charAt(i)];
            if (s == m) {
                return i - m + 1;
            }
        }
        
        // åŒ¹é…å¤±è´¥ï¼Œè¿”å›-1
        return -1;
    }
}


 2.**Review** 

 è¿™å‘¨å›å¹¿å·äº†æ²¡æœ‰åŠ¨ä»£ç  ğŸ˜„

3.**Tips**  
äº‹åŠ¡ç›¸å…³
ä»€ä¹ˆæ˜¯äº‹åŠ¡ï¼Ÿ
äº‹åŠ¡æ˜¯é€»è¾‘ä¸Šçš„ä¸€ç»„æ“ä½œï¼Œè¦ä¹ˆéƒ½æ‰§è¡Œï¼Œè¦ä¹ˆéƒ½ä¸æ‰§è¡Œã€‚

äº‹åŠ¡æœ€ç»å…¸ä¹Ÿç»å¸¸è¢«æ‹¿å‡ºæ¥è¯´ä¾‹å­å°±æ˜¯è½¬è´¦äº†ã€‚å‡å¦‚å°æ˜è¦ç»™å°çº¢è½¬è´¦1000å…ƒï¼Œè¿™ä¸ªè½¬è´¦ä¼šæ¶‰åŠåˆ°ä¸¤ä¸ªå…³é”®æ“ä½œå°±æ˜¯ï¼šå°†å°æ˜çš„ä½™é¢å‡å°‘1000å…ƒï¼Œå°†å°çº¢çš„ä½™é¢å¢åŠ 1000å…ƒã€‚ä¸‡ä¸€åœ¨è¿™ä¸¤ä¸ªæ“ä½œä¹‹é—´çªç„¶å‡ºç°é”™è¯¯æ¯”å¦‚é“¶è¡Œç³»ç»Ÿå´©æºƒï¼Œå¯¼è‡´å°æ˜ä½™é¢å‡å°‘è€Œå°çº¢çš„ä½™é¢æ²¡æœ‰å¢åŠ ï¼Œè¿™æ ·å°±ä¸å¯¹äº†ã€‚äº‹åŠ¡å°±æ˜¯ä¿è¯è¿™ä¸¤ä¸ªå…³é”®æ“ä½œè¦ä¹ˆéƒ½æˆåŠŸï¼Œè¦ä¹ˆéƒ½è¦å¤±è´¥ã€‚

äº‹ç‰©çš„å››å¤§ç‰¹æ€§(ACID)ä»‹ç»ä¸€ä¸‹ï¼Ÿ
image
åŸå­æ€§ï¼š äº‹åŠ¡æ˜¯æœ€å°çš„æ‰§è¡Œå•ä½ï¼Œä¸å…è®¸åˆ†å‰²ã€‚äº‹åŠ¡çš„åŸå­æ€§ç¡®ä¿åŠ¨ä½œè¦ä¹ˆå…¨éƒ¨å®Œæˆï¼Œè¦ä¹ˆå®Œå…¨ä¸èµ·ä½œç”¨ï¼›

ä¸€è‡´æ€§ï¼š æ‰§è¡Œäº‹åŠ¡å‰åï¼Œæ•°æ®ä¿æŒä¸€è‡´ï¼Œå¤šä¸ªäº‹åŠ¡å¯¹åŒä¸€ä¸ªæ•°æ®è¯»å–çš„ç»“æœæ˜¯ç›¸åŒçš„ï¼›

éš”ç¦»æ€§ï¼š å¹¶å‘è®¿é—®æ•°æ®åº“æ—¶ï¼Œä¸€ä¸ªç”¨æˆ·çš„äº‹åŠ¡ä¸è¢«å…¶ä»–äº‹åŠ¡æ‰€å¹²æ‰°ï¼Œå„å¹¶å‘äº‹åŠ¡ä¹‹é—´æ•°æ®åº“æ˜¯ç‹¬ç«‹çš„ï¼›

æŒä¹…æ€§ï¼šä¸€ä¸ªäº‹åŠ¡è¢«æäº¤ä¹‹åã€‚å®ƒå¯¹æ•°æ®åº“ä¸­æ•°æ®çš„æ”¹å˜æ˜¯æŒä¹…çš„ï¼Œå³ä½¿æ•°æ®åº“å‘ç”Ÿæ•…éšœä¹Ÿä¸åº”è¯¥å¯¹å…¶æœ‰ä»»ä½•å½±å“ã€‚

å¹¶å‘äº‹åŠ¡å¸¦æ¥å“ªäº›é—®é¢˜ï¼Ÿ
åœ¨å…¸å‹çš„åº”ç”¨ç¨‹åºä¸­ï¼Œå¤šä¸ªäº‹åŠ¡å¹¶å‘è¿è¡Œï¼Œç»å¸¸ä¼šæ“ä½œç›¸åŒçš„æ•°æ®æ¥å®Œæˆå„è‡ªçš„ä»»åŠ¡ï¼ˆå¤šä¸ªç”¨æˆ·å¯¹ç»Ÿä¸€æ•°æ®è¿›è¡Œæ“ä½œï¼‰ã€‚å¹¶å‘è™½ç„¶æ˜¯å¿…é¡»çš„ï¼Œä½†å¯èƒ½ä¼šå¯¼è‡´ä»¥ä¸‹çš„é—®é¢˜ï¼š

è„è¯»ï¼ˆDirty readï¼‰: å½“ä¸€ä¸ªäº‹åŠ¡æ­£åœ¨è®¿é—®æ•°æ®å¹¶ä¸”å¯¹æ•°æ®è¿›è¡Œäº†ä¿®æ”¹ï¼Œè€Œè¿™ç§ä¿®æ”¹è¿˜æ²¡æœ‰æäº¤åˆ°æ•°æ®åº“ä¸­ï¼Œè¿™æ—¶å¦å¤–ä¸€ä¸ªäº‹åŠ¡ä¹Ÿè®¿é—®äº†è¿™ä¸ªæ•°æ®ï¼Œç„¶åä½¿ç”¨äº†è¿™ä¸ªæ•°æ®ã€‚å› ä¸ºè¿™ä¸ªæ•°æ®æ˜¯è¿˜æ²¡æœ‰æäº¤çš„æ•°æ®ï¼Œé‚£ä¹ˆå¦å¤–ä¸€ä¸ªäº‹åŠ¡è¯»åˆ°çš„è¿™ä¸ªæ•°æ®æ˜¯â€œè„æ•°æ®â€ï¼Œä¾æ®â€œè„æ•°æ®â€æ‰€åšçš„æ“ä½œå¯èƒ½æ˜¯ä¸æ­£ç¡®çš„ã€‚

ä¸¢å¤±ä¿®æ”¹ï¼ˆLost to modifyï¼‰: æŒ‡åœ¨ä¸€ä¸ªäº‹åŠ¡è¯»å–ä¸€ä¸ªæ•°æ®æ—¶ï¼Œå¦å¤–ä¸€ä¸ªäº‹åŠ¡ä¹Ÿè®¿é—®äº†è¯¥æ•°æ®ï¼Œé‚£ä¹ˆåœ¨ç¬¬ä¸€ä¸ªäº‹åŠ¡ä¸­ä¿®æ”¹äº†è¿™ä¸ªæ•°æ®åï¼Œç¬¬äºŒä¸ªäº‹åŠ¡ä¹Ÿä¿®æ”¹äº†è¿™ä¸ªæ•°æ®ã€‚è¿™æ ·ç¬¬ä¸€ä¸ªäº‹åŠ¡å†…çš„ä¿®æ”¹ç»“æœå°±è¢«ä¸¢å¤±ï¼Œå› æ­¤ç§°ä¸ºä¸¢å¤±ä¿®æ”¹ã€‚ä¾‹å¦‚ï¼šäº‹åŠ¡1è¯»å–æŸè¡¨ä¸­çš„æ•°æ®A=20ï¼Œäº‹åŠ¡2ä¹Ÿè¯»å–A=20ï¼Œäº‹åŠ¡1ä¿®æ”¹A=A-1ï¼Œäº‹åŠ¡2ä¹Ÿä¿®æ”¹A=A-1ï¼Œæœ€ç»ˆç»“æœA=19ï¼Œäº‹åŠ¡1çš„ä¿®æ”¹è¢«ä¸¢å¤±ã€‚

ä¸å¯é‡å¤è¯»ï¼ˆUnrepeatablereadï¼‰: æŒ‡åœ¨ä¸€ä¸ªäº‹åŠ¡å†…å¤šæ¬¡è¯»åŒä¸€æ•°æ®ã€‚åœ¨è¿™ä¸ªäº‹åŠ¡è¿˜æ²¡æœ‰ç»“æŸæ—¶ï¼Œå¦ä¸€ä¸ªäº‹åŠ¡ä¹Ÿè®¿é—®è¯¥æ•°æ®ã€‚é‚£ä¹ˆï¼Œåœ¨ç¬¬ä¸€ä¸ªäº‹åŠ¡ä¸­çš„ä¸¤æ¬¡è¯»æ•°æ®ä¹‹é—´ï¼Œç”±äºç¬¬äºŒä¸ªäº‹åŠ¡çš„ä¿®æ”¹å¯¼è‡´ç¬¬ä¸€ä¸ªäº‹åŠ¡ä¸¤æ¬¡è¯»å–çš„æ•°æ®å¯èƒ½ä¸å¤ªä¸€æ ·ã€‚è¿™å°±å‘ç”Ÿäº†åœ¨ä¸€ä¸ªäº‹åŠ¡å†…ä¸¤æ¬¡è¯»åˆ°çš„æ•°æ®æ˜¯ä¸ä¸€æ ·çš„æƒ…å†µï¼Œå› æ­¤ç§°ä¸ºä¸å¯é‡å¤è¯»ã€‚

å¹»è¯»ï¼ˆPhantom readï¼‰: å¹»è¯»ä¸ä¸å¯é‡å¤è¯»ç±»ä¼¼ã€‚å®ƒå‘ç”Ÿåœ¨ä¸€ä¸ªäº‹åŠ¡ï¼ˆT1ï¼‰è¯»å–äº†å‡ è¡Œæ•°æ®ï¼Œæ¥ç€å¦ä¸€ä¸ªå¹¶å‘äº‹åŠ¡ï¼ˆT2ï¼‰æ’å…¥äº†ä¸€äº›æ•°æ®æ—¶ã€‚åœ¨éšåçš„æŸ¥è¯¢ä¸­ï¼Œç¬¬ä¸€ä¸ªäº‹åŠ¡ï¼ˆT1ï¼‰å°±ä¼šå‘ç°å¤šäº†ä¸€äº›åŸæœ¬ä¸å­˜åœ¨çš„è®°å½•ï¼Œå°±å¥½åƒå‘ç”Ÿäº†å¹»è§‰ä¸€æ ·ï¼Œæ‰€ä»¥ç§°ä¸ºå¹»è¯»ã€‚

ä¸å¯é‡å¤åº¦å’Œå¹»è¯»åŒºåˆ«ï¼š

ä¸å¯é‡å¤è¯»çš„é‡ç‚¹æ˜¯ä¿®æ”¹ï¼Œå¹»è¯»çš„é‡ç‚¹åœ¨äºæ–°å¢æˆ–è€…åˆ é™¤ã€‚

ä¾‹1ï¼ˆåŒæ ·çš„æ¡ä»¶, ä½ è¯»å–è¿‡çš„æ•°æ®, å†æ¬¡è¯»å–å‡ºæ¥å‘ç°å€¼ä¸ä¸€æ ·äº† ï¼‰ï¼šäº‹åŠ¡1ä¸­çš„Aå…ˆç”Ÿè¯»å–è‡ªå·±çš„å·¥èµ„ä¸º 1000çš„æ“ä½œè¿˜æ²¡å®Œæˆï¼Œäº‹åŠ¡2ä¸­çš„Bå…ˆç”Ÿå°±ä¿®æ”¹äº†Açš„å·¥èµ„ä¸º2000ï¼Œå¯¼ è‡´Aå†è¯»è‡ªå·±çš„å·¥èµ„æ—¶å·¥èµ„å˜ä¸º 2000ï¼›è¿™å°±æ˜¯ä¸å¯é‡å¤è¯»ã€‚

ä¾‹2ï¼ˆåŒæ ·çš„æ¡ä»¶, ç¬¬1æ¬¡å’Œç¬¬2æ¬¡è¯»å‡ºæ¥çš„è®°å½•æ•°ä¸ä¸€æ · ï¼‰ï¼šå‡æŸå·¥èµ„å•è¡¨ä¸­å·¥èµ„å¤§äº3000çš„æœ‰4äººï¼Œäº‹åŠ¡1è¯»å–äº†æ‰€æœ‰å·¥èµ„å¤§äº3000çš„äººï¼Œå…±æŸ¥åˆ°4æ¡è®°å½•ï¼Œè¿™æ—¶äº‹åŠ¡2 åˆæ’å…¥äº†ä¸€æ¡å·¥èµ„å¤§äº3000çš„è®°å½•ï¼Œäº‹åŠ¡1å†æ¬¡è¯»å–æ—¶æŸ¥åˆ°çš„è®°å½•å°±å˜ä¸ºäº†5æ¡ï¼Œè¿™æ ·å°±å¯¼è‡´äº†å¹»è¯»ã€‚

é“¾æ¥ï¼šhttps://www.jianshu.com/p/2a66b2ddc0fd

4.**Share**  

<è®¾è®¡æ¨¡å¼> æ„Ÿè§‰å¾ˆä¸é”™å™¢ï¼Œæœ€è¿‘åˆæœ‰æ‰“å¡æ´»åŠ¨ï¼
<javaæ€§èƒ½è°ƒä¼˜>

